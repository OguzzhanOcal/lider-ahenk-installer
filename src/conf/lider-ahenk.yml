#Database configuration
cmd_deb_frontend : export DEBIAN_FRONTEND="noninteractive"
cmd_pwd : echo {0} | sudo -S su && echo 'mariadb-server mysql-server/root_password password {1}'| sudo debconf-set-selections
cmd_pwd_again : echo {0} | sudo -S su && echo 'mariadb-server mysql-server/root_password_again password {1}'| sudo debconf-set-selections
cmd_db_install : echo {0} | sudo -S apt install -y --force-yes mariadb-server
cmd_db_dep : echo {0} | sudo -S apt -f install
cmd_create_db : echo {0} | sudo -S mysql -uroot -p{1} -e 'CREATE DATABASE liderdb DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_general_ci'
cmd_db_grant_privileges : mysql -uroot -p{0} -e "GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY '{1}' WITH GRANT OPTION;"
cmd_db_replace_bind_addr : echo {0} | sudo -S sed -i 's/^bind-address/#&/' /etc/mysql/my.cnf
cmd_db_service : echo {0} | sudo -S systemctl restart mysql.service

#Ejabberd configuration
jabberd_des_path : /tmp
cmd_ejabberd_install : echo {0} | sudo -S apt -y install ejabberd=16.06-0
cmd_cp_conf : echo {0} | sudo -S cp /tmp/ejabberd.yml /opt/ejabberd-16.06/conf
cmd_chown_ejabberd : chown -R ejabberd:ejabberd {0}
cmd_register : echo {0} | sudo -S /opt/ejabberd-16.06/bin/ejabberdctl register {1} {2} {3}